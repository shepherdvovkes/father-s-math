#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–π
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from model.function_library import FunctionLibrary
from model.calculator import Calculator
import matplotlib.pyplot as plt
import numpy as np

def demo_functions():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π"""
    print("üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–π")
    print("=" * 60)
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
    library = FunctionLibrary()
    calculator = Calculator(library)
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
    functions = library.get_function_names()
    print(f"üìä –í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ —Ñ—É–Ω–∫—Ü–∏–π: {len(functions)}")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
    categories = {
        "–ü–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã–µ": ["–ü—Ä—è–º–∞—è –ª–∏–Ω–∏—è", "–ü–∞—Ä–∞–±–æ–ª–∞", "–ö—É–±–∏—á–µ—Å–∫–∞—è –ø–∞—Ä–∞–±–æ–ª–∞", "–ü–æ–ª–∏–Ω–æ–º 4-–π —Å—Ç–µ–ø–µ–Ω–∏"],
        "–†–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ": ["–ì–∏–ø–µ—Ä–±–æ–ª–∞", "–ö–æ–ª–æ–∫–æ–ª –ê–Ω—å–µ–∑–∏"],
        "–°—Ç–µ–ø–µ–Ω–Ω—ã–µ –∏ –∫–æ—Ä–Ω–µ–≤—ã–µ": ["–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å", "–ö—É–±–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–µ–Ω—å", "–°—Ç–µ–ø–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"],
        "–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ": ["–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç", "–ö–æ–ª–æ–∫–æ–ª –ì–∞—É—Å—Å–∞", "–°–∏–≥–º–æ–∏–¥–∞"],
        "–õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏–µ": ["–õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∞—è"],
        "–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ": ["–°–∏–Ω—É—Å–æ–∏–¥–∞", "–¢–∞–Ω–≥–µ–Ω—Å–æ–∏–¥–∞", "–°–µ–∫–∞–Ω—Å–æ–∏–¥–∞", "Sinc —Ñ—É–Ω–∫—Ü–∏—è", "–ó–∞—Ç—É—Ö–∞—é—â–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è"],
        "–ú–æ–¥—É–ª—å–Ω—ã–µ –∏ –∫—É—Å–æ—á–Ω—ã–µ": ["–ú–æ–¥—É–ª—å", "–°—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è", "–ü–∏–ª–∞"],
        "–ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ": ["–≠–ª–ª–∏–ø—Å", "–¶–∏–∫–ª–æ–∏–¥–∞", "–§–∏–≥—É—Ä—ã –õ–∏—Å—Å–∞–∂—É", "–ê—Å—Ç—Ä–æ–∏–¥–∞"],
        "–ü–æ–ª—è—Ä–Ω—ã–µ": ["–°–ø–∏—Ä–∞–ª—å –ê—Ä—Ö–∏–º–µ–¥–∞", "–†–æ–∑–∞", "–ö–∞—Ä–¥–∏–æ–∏–¥–∞", "–õ–µ–º–Ω–∏—Å–∫–∞—Ç–∞ –ë–µ—Ä–Ω—É–ª–ª–∏", "–ó–≤–µ–∑–¥–∞ –î–∞–≤–∏–¥–∞"],
        "–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ": ["–ì–∞—Ä–º–æ—à–∫–∞"]
    }
    
    print("\nüìã –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π:")
    for category, funcs in categories.items():
        print(f"  ‚Ä¢ {category}: {len(funcs)} —Ñ—É–Ω–∫—Ü–∏–π")
    
    # –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
    demo_examples = [
        ("–ü–∞—Ä–∞–±–æ–ª–∞", [1, -2, 1], "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø–∞—Ä–∞–±–æ–ª–∞ —Å–æ —Å–¥–≤–∏–≥–æ–º"),
        ("–°–∏–Ω—É—Å–æ–∏–¥–∞", [2, 3, 0, 1], "–í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–∞—è —Å–∏–Ω—É—Å–æ–∏–¥–∞"),
        ("–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç", [1, 0.5], "–£–º–µ—Ä–µ–Ω–Ω—ã–π —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç"),
        ("–ö–æ–ª–æ–∫–æ–ª –ì–∞—É—Å—Å–∞", [2, 1, 0], "–°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª"),
        ("–ó–≤–µ–∑–¥–∞ –î–∞–≤–∏–¥–∞", [4, -2, 6], "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —à–µ—Å—Ç–∏–∫–æ–Ω–µ—á–Ω–∞—è –∑–≤–µ–∑–¥–∞"),
        ("–†–æ–∑–∞", [2, 5], "–†–æ–∑–∞ —Å 5 –ª–µ–ø–µ—Å—Ç–∫–∞–º–∏"),
        ("–ö–∞—Ä–¥–∏–æ–∏–¥–∞", [2], "–ë–æ–ª—å—à–∞—è –∫–∞—Ä–¥–∏–æ–∏–¥–∞"),
        ("–°–ø–∏—Ä–∞–ª—å –ê—Ä—Ö–∏–º–µ–¥–∞", [0.5], "–ü–ª–∞–≤–Ω–∞—è —Å–ø–∏—Ä–∞–ª—å")
    ]
    
    print(f"\nüé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤:")
    for func_name, params, description in demo_examples:
        print(f"  ‚Ä¢ {func_name}: {description}")
        print(f"    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: {params}")
        
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ—É–Ω–∫—Ü–∏–∏
        func_info = library.get_function_info(func_name)
        if func_info:
            print(f"    –§–æ—Ä–º—É–ª–∞: {func_info['formula']}")
            print(f"    –¢–∏–ø: {func_info['type']}")
            
            # –ü–æ–ª—É—á–∞–µ–º —à–∞–±–ª–æ–Ω—ã
            templates = library.get_templates(func_name)
            if templates:
                print(f"    –î–æ—Å—Ç—É–ø–Ω–æ —à–∞–±–ª–æ–Ω–æ–≤: {len(templates)}")
                for i, template in enumerate(templates[:3]):  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 3
                    print(f"      {i+1}. {template['name']}: {template['params']}")
            print()
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä - –ó–≤–µ–∑–¥–∞ –î–∞–≤–∏–¥–∞
    print("‚≠ê –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ó–≤–µ–∑–¥–∞ –î–∞–≤–∏–¥–∞")
    print("=" * 40)
    star_func = library.get_function_info("–ó–≤–µ–∑–¥–∞ –î–∞–≤–∏–¥–∞")
    if star_func:
        print(f"–§–æ—Ä–º—É–ª–∞: {star_func['formula']}")
        print("–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—É—é —Ñ–æ—Ä–º—É")
        print("–∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—è—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –ü–∞—Ä–∞–º–µ—Ç—Ä k=6 —Å–æ–∑–¥–∞–µ—Ç")
        print("—à–µ—Å—Ç–∏–∫–æ–Ω–µ—á–Ω—É—é –∑–≤–µ–∑–¥—É, –ø–æ—Ö–æ–∂—É—é –Ω–∞ –ó–≤–µ–∑–¥—É –î–∞–≤–∏–¥–∞.")
        print()
        print("–ü–æ—á–µ–º—É –ø–æ–ª—è—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã?")
        print("- –í –¥–µ–∫–∞—Ä—Ç–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö y = f(x) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ x")
        print("  –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ y")
        print("- –ó–≤–µ–∑–¥–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç '—Ç–µ—Å—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏'")
        print("- –ü–æ–ª—è—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã r = f(Œ∏) –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å")
        print("  –∑–∞–º–∫–Ω—É—Ç—ã–µ —Ñ–∏–≥—É—Ä—ã –∏ —Å–ª–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã")
    
    print("\nüöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:")
    print("   python main.py")
    print("\nüìñ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é '–ü–æ–º–æ—â—å' –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ")

if __name__ == "__main__":
    demo_functions()
