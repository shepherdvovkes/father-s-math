# Интеграция KaTeX для отображения математических формул

## Описание

В проект интегрирована библиотека **KaTeX** для красивого отображения математических формул в натуральном математическом виде. KaTeX - это быстрая библиотека для рендеринга математических формул, написанная на JavaScript.

## Что было добавлено

### 1. Подключение KaTeX
- Добавлены CDN ссылки на KaTeX CSS и JavaScript в `index.html`
- Подключен auto-render плагин для автоматического рендеринга формул

### 2. Новый файл с математическими формулами
- Создан `js/model/mathFormulas.js` с классом `MathFormulas`
- Содержит LaTeX формулы для всех 30+ функций
- Поддерживает декартовы, параметрические и полярные функции

### 3. Обновление UI
- Обновлен `js/view/uiPanel.js` для рендеринга формул с помощью KaTeX
- Добавлен метод `_renderMathFormula()` для отображения формул
- Улучшены стили CSS для красивого отображения математических выражений

### 4. Стилизация
- Добавлены специальные CSS стили для KaTeX в `styles.css`
- Настроены цвета и размеры для различных математических элементов
- Добавлены стили для контейнеров формул

## Структура формул

### Декартовы функции
```latex
y = ax + b                    # Линейная
y = ax^2 + bx + c            # Квадратичная
y = ax^3 + bx                # Кубическая
y = ae^{bx} + c              # Экспоненциальная
y = a\ln(bx + c) + d         # Логарифмическая
y = a\sin(bx + c) + d        # Синусоида
y = ae^{-\frac{(x-b)^2}{2c^2}} # Гауссов колокол
y = \frac{a}{1 + e^{-b(x-c)}} + d # Сигмоида
```

### Параметрические функции
```latex
\begin{cases} 
x = a\cos(t) \\ 
y = a\sin(t) 
\end{cases}                  # Окружность

\begin{cases} 
x = a\sin(pt + \delta) \\ 
y = b\sin(qt) 
\end{cases}                  # Фигуры Лиссажу
```

### Полярные функции
```latex
r = a\cos(k\theta)           # Роза
r = a(1 - \cos(\theta))      # Кардиоида
r = a\sqrt{\cos(2\theta)}    # Лемниската Бернулли
r = ae^{b\theta}             # Логарифмическая спираль
```

## Использование

### В коде JavaScript
```javascript
// Создание экземпляра класса формул
const mathFormulas = new MathFormulas();

// Получение LaTeX формулы
const latexFormula = mathFormulas.getFormula("Linear");
// Результат: "y = ax + b"

// Получение отображаемой формулы
const displayFormula = mathFormulas.getDisplayFormula("Linear");
// Результат: "y = ax + b"

// Проверка типа функции
const type = mathFormulas.getFunctionType("Circle");
// Результат: "parametric"
```

### Рендеринг формулы с KaTeX
```javascript
// Рендеринг формулы в элемент
if (typeof katex !== 'undefined') {
    katex.render("y = ax^2 + bx + c", element, {
        displayMode: true,
        throwOnError: false,
        errorColor: '#cc0000'
    });
}
```

## Демонстрация

Создан файл `math_demo.html` для демонстрации работы KaTeX с различными типами математических формул. Откройте этот файл в браузере, чтобы увидеть все формулы в красивом математическом виде.

## Преимущества KaTeX

1. **Быстродействие** - KaTeX рендерит формулы быстрее MathJax
2. **Качество** - Высокое качество отображения математических символов
3. **Простота** - Легкая интеграция и настройка
4. **Совместимость** - Работает во всех современных браузерах
5. **Размер** - Меньший размер библиотеки по сравнению с альтернативами

## Поддерживаемые математические элементы

- Базовые операции: `+`, `-`, `*`, `/`, `^`
- Дроби: `\frac{a}{b}`
- Корни: `\sqrt{x}`, `\sqrt[n]{x}`
- Тригонометрические функции: `\sin`, `\cos`, `\tan`
- Логарифмы: `\ln`, `\log`
- Экспоненты: `e^{x}`
- Абсолютные значения: `|x|`
- Системы уравнений: `\begin{cases} ... \end{cases}`
- Греческие буквы: `\alpha`, `\beta`, `\theta`, `\pi`
- И многие другие...

## Настройка стилей

Стили KaTeX можно настроить в файле `styles.css`:

```css
.katex {
    font-size: 1.2em !important;
    color: #2d3748 !important;
}

.katex .mbin {
    color: #667eea !important;
}

.katex .mrel {
    color: #667eea !important;
}
```

## Обработка ошибок

Система включает fallback механизм:
- Если KaTeX недоступен, формулы отображаются как обычный текст
- При ошибках рендеринга показывается простая текстовая версия
- Все ошибки логируются в консоль для отладки

## Совместимость

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+
- ✅ Internet Explorer 11 (с ограничениями)

## Заключение

Интеграция KaTeX значительно улучшает пользовательский опыт, предоставляя профессиональное отображение математических формул. Все 30+ функций теперь отображаются в красивом математическом виде, что делает приложение более привлекательным и удобным для использования в образовательных целях.
